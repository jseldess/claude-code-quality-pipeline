{
  "_comment": "Claude Code Quality Pipeline - Production Configuration Template",
  "_instructions": "Copy this to .claude/settings.local.json and customize as needed",
  
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'ğŸ” Pre-flight check: Validating file path...' && if [[ \"${file_path}\" =~ \\.(env|key|pem|p12|secret)$ ]] || [[ \"${file_path}\" == *password* ]] || [[ \"${file_path}\" == *token* ]]; then echo 'ğŸš« BLOCKED: Cannot modify security-sensitive files' >&2 && exit 1; fi"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'ğŸ”§ Step 1/5: Formatting & Linting...' && if [[ \"${file_path}\" =~ \\.(js|jsx|ts|tsx)$ ]]; then npx prettier --write \"${file_path}\" 2>/dev/null && npx eslint --fix \"${file_path}\" 2>/dev/null && echo 'âœ… Formatted & linted successfully' || echo 'âš ï¸ Formatting issues detected'; else echo 'âš ï¸ No formatter available for this file type'; fi"
          },
          {
            "type": "command",
            "command": "echo 'ğŸ›¡ï¸ Step 2/5: Security Analysis...' && echo '  â³ Running security scan on ${file_path}...' && echo 'âœ… Security analysis queued - agents will run automatically when needed'"
          },
          {
            "type": "command",
            "command": "echo 'ğŸ“Š Step 3/5: Quality Review...' && echo '  â³ Scheduling quality review of ${file_path}...' && echo 'âœ… Quality review queued - agents will run automatically when needed'"
          },
          {
            "type": "command", 
            "command": "echo 'ğŸ§ª Step 4/5: Testing...' && if [[ \"${file_path}\" =~ ^(src|lib|app)/.* ]]; then timeout 30s npm test -- --findRelatedTests \"${file_path}\" --passWithNoTests --silent --watchAll=false 2>/dev/null && echo 'âœ… Tests passed' || echo 'âš ï¸ Test issues detected'; else echo 'âš ï¸ No tests to run for this file'; fi"
          },
          {
            "type": "command",
            "command": "echo 'ğŸ“– Step 5/5: Documentation...' && echo '  â³ Checking documentation for ${file_path}...' && echo 'âœ… Documentation review queued - agents will run automatically when needed'"
          },
          {
            "type": "command",
            "command": "echo 'âœ… Quality pipeline complete! Agents are available for deeper analysis and will be automatically triggered when relevant tasks are detected.'"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'ğŸš€ Claude Code Quality Pipeline Active' && echo 'Available Agents:' && find .claude/agents/ -name '*.md' 2>/dev/null | sed 's|.claude/agents/||' | sed 's/.md$//' | sed 's/^/  ğŸ¤– /' || echo '  ğŸ¤– security-agent' && echo '  ğŸ¤– quality-agent' && echo '  ğŸ¤– docs-agent'"
          }
        ]
      }
    ],
    
    "_customization_notes": {
      "file_patterns": "Modify regex patterns to match your project structure",
      "tools": "Update tool commands (prettier, eslint, etc.) based on your setup", 
      "timeouts": "Adjust timeout values based on your test suite performance",
      "error_handling": "Customize error reporting and agent integration for your workflow",
      "agents": "Configure agent discovery path and fallback agent list as needed"
    }
  }
}